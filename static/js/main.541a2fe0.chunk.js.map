{"version":3,"sources":["components/forceGraphGenerator.js","components/forceGraph.js","App.js","index.js","components/forceGraph.module.css"],"names":["runForceGraph","container","linksData","nodesData","links","map","d","Object","assign","nodes","containerRect","getBoundingClientRect","height","width","drag","simulation","d3","on","active","alphaTarget","restart","fx","x","fy","y","document","querySelector","tooltipDiv","createElement","classList","add","styles","tooltip","style","opacity","id","body","appendChild","div","force","strength","svg","append","attr","call","transform","link","selectAll","data","join","Math","sqrt","value","node","label","enter","text","name","transition","duration","html","pageX","pageY","addTooltip","source","target","destroy","stop","ForceGraph","containerRef","React","useRef","useEffect","destroyFn","current","ref","className","App","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"o0BAIO,SAASA,EAAcC,EAAWC,EAAWC,GAClD,IAAMC,EAAQF,EAAUG,KAAI,SAACC,GAAD,OAAOC,OAAOC,OAAO,GAAIF,MAC/CG,EAAQN,EAAUE,KAAI,SAACC,GAAD,OAAOC,OAAOC,OAAO,GAAIF,MAE/CI,EAAgBT,EAAUU,wBAC1BC,EAASF,EAAcE,OACvBC,EAAQH,EAAcG,MAEtBC,EAAO,SAACC,GAkBZ,OAAOC,MAEJC,GAAG,SAnBc,SAACX,GACdU,IAASE,QAAQH,EAAWI,YAAY,IAAKC,UAClDd,EAAEe,GAAKf,EAAEgB,EACThB,EAAEiB,GAAKjB,EAAEkB,KAiBRP,GAAG,QAdU,SAACX,GACfA,EAAEe,GAAKL,IAASM,EAChBhB,EAAEiB,GAAKP,IAASQ,KAafP,GAAG,OAVY,SAACX,GACZU,IAASE,QAAQH,EAAWI,YAAY,GAC7Cb,EAAEe,GAAK,KACPf,EAAEiB,GAAK,SAYX,IADgBE,SAASC,cAAc,kBACzB,CACZ,IAAMC,EAAaF,SAASG,cAAc,OAC1CD,EAAWE,UAAUC,IAAIC,IAAOC,SAChCL,EAAWM,MAAMC,QAAU,IAC3BP,EAAWQ,GAAK,gBAChBV,SAASW,KAAKC,YAAYV,GAE5B,IAAMW,EAAMtB,IAAU,kBAgBhBD,EAAaC,IAEAP,GAEhB8B,MACC,OACAvB,IAAaZ,GAAO+B,IAAG,SAAC7B,GAAD,OAAOA,EAAE6B,OAGjCI,MAAM,SAAUvB,MAAmBwB,UAAU,OAE7CD,MAAM,IAAKvB,OACXuB,MAAM,IAAKvB,OAERyB,EAAMzB,IACFf,GACPyC,OAAO,OACPC,KAAK,UAAW,EAAE9B,EAAQ,GAAID,EAAS,EAAGC,EAAOD,IACjDgC,KACC5B,MAAUC,GAAG,QAAQ,WACnBwB,EAAIE,KAAK,YAAa3B,IAAS6B,eAI/BC,EAAOL,EACVC,OAAO,KACPC,KAAK,SAAU,QACfA,KAAK,iBAAkB,IACvBI,UAAU,QACVC,KAAK5C,GACL6C,KAAK,QACLN,KAAK,gBAAgB,SAACrC,GAAD,OAAO4C,KAAKC,KAAK7C,EAAE8C,UAErCC,EAAOZ,EACVC,OAAO,KACPC,KAAK,SAAU,QACfA,KAAK,eAAgB,GACrBI,UAAU,UACVC,KAAKvC,GACLwC,KAAK,UACLN,KAAK,IAAK,IACVA,KAAK,OAAQ,WACbC,KAAK9B,EAAKC,IAEPuC,EAAQb,EACXC,OAAO,KACPC,KAAK,QAAS,UACdI,UAAU,QACVC,KAAKvC,GACL8C,QACAb,OAAO,QACPC,KAAK,cAAe,UACpBA,KAAK,oBAAqB,WAC1BV,MAAM,OAAQ,SACduB,MAAK,SAAClD,GACL,OAAOA,EAAEmD,QAGVb,KAAK9B,EAAKC,IA+Bb,OA7BAuC,EACGrC,GAAG,aAAa,SAACX,IA3ED,SAACA,GAClBgC,EAAIoB,aAAaC,SAAS,KAAK1B,MAAM,UAAW,IAChD,IAAM2B,EAAI,kBAActD,EAAEmD,KAAhB,cACVnB,EACGsB,KAAKA,GACL3B,MAAM,OAFT,UAEoBjB,IAAS6C,MAF7B,OAGG5B,MAAM,MAHT,UAGmBjB,IAAS8C,MAAQ,GAHpC,OAyEEC,CAAWzD,EAAGU,IAAS6C,MAAO7C,IAAS8C,UAExC7C,GAAG,YAAY,WApEhBqB,EAAIoB,aAAaC,SAAS,KAAK1B,MAAM,UAAW,MAwElDlB,EAAWE,GAAG,QAAQ,WAEpB6B,EACGH,KAAK,MAAM,SAACrC,GAAD,OAAOA,EAAE0D,OAAO1C,KAC3BqB,KAAK,MAAM,SAACrC,GAAD,OAAOA,EAAE0D,OAAOxC,KAC3BmB,KAAK,MAAM,SAACrC,GAAD,OAAOA,EAAE2D,OAAO3C,KAC3BqB,KAAK,MAAM,SAACrC,GAAD,OAAOA,EAAE2D,OAAOzC,KAG9B6B,EAAKV,KAAK,MAAM,SAACrC,GAAD,OAAOA,EAAEgB,KAAGqB,KAAK,MAAM,SAACrC,GAAD,OAAOA,EAAEkB,KAGhD8B,EACGX,KAAK,KAAK,SAACrC,GACV,OAAOA,EAAEgB,KAEVqB,KAAK,KAAK,SAACrC,GACV,OAAOA,EAAEkB,QAIR,CACL0C,QAAS,WACPnD,EAAWoD,QAEb1D,MAAO,WACL,OAAOgC,EAAIY,SCxJV,SAASe,EAAT,GAA+C,IAAzBlE,EAAwB,EAAxBA,UAAWC,EAAa,EAAbA,UAChCkE,EAAeC,IAAMC,OAAO,MAalC,OAXAD,IAAME,WAAU,WACd,IAAIC,EAEAJ,EAAaK,UAEfD,EADoBzE,EAAcqE,EAAaK,QAASxE,EAAWC,GAA3D+D,SAIV,OAAOO,IACN,IAEI,yBAAKE,IAAKN,EAAcO,UAAW7C,IAAO9B,Y,MCApC4E,MAbf,WACE,OACE,yBAAKD,UAAU,OACb,4BAAQA,UAAU,cAAlB,wBAGA,6BAASA,UAAU,QACjB,kBAACR,EAAD,CAAYlE,UAAW8C,EAAK5C,MAAOD,UAAW6C,EAAKvC,WCR3DqE,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFvD,SAASwD,eAAe,U,kBCP1BC,EAAOC,QAAU,CAAC,UAAY,8BAA8B,KAAO,yBAAyB,QAAU,+B","file":"static/js/main.541a2fe0.chunk.js","sourcesContent":["import * as d3 from \"d3\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport styles from \"./forceGraph.module.css\";\r\n\r\nexport function runForceGraph(container, linksData, nodesData) {\r\n  const links = linksData.map((d) => Object.assign({}, d));\r\n  const nodes = nodesData.map((d) => Object.assign({}, d));\r\n\r\n  const containerRect = container.getBoundingClientRect();\r\n  const height = containerRect.height;\r\n  const width = containerRect.width;\r\n\r\n  const drag = (simulation) => {\r\n    const dragstarted = (d) => {\r\n      if (!d3.event.active) simulation.alphaTarget(0.3).restart();\r\n      d.fx = d.x;\r\n      d.fy = d.y;\r\n    };\r\n\r\n    const dragged = (d) => {\r\n      d.fx = d3.event.x;\r\n      d.fy = d3.event.y;\r\n    };\r\n\r\n    const dragended = (d) => {\r\n      if (!d3.event.active) simulation.alphaTarget(0);\r\n      d.fx = null;\r\n      d.fy = null;\r\n    };\r\n\r\n    return d3\r\n      .drag()\r\n      .on(\"start\", dragstarted)\r\n      .on(\"drag\", dragged)\r\n      .on(\"end\", dragended);\r\n  };\r\n\r\n  // Add the tooltip element to the graph\r\n  const tooltip = document.querySelector(\"#graph-tooltip\");\r\n  if (!tooltip) {\r\n    const tooltipDiv = document.createElement(\"div\");\r\n    tooltipDiv.classList.add(styles.tooltip);\r\n    tooltipDiv.style.opacity = \"0\";\r\n    tooltipDiv.id = \"graph-tooltip\";\r\n    document.body.appendChild(tooltipDiv);\r\n  }\r\n  const div = d3.select(\"#graph-tooltip\");\r\n\r\n  const addTooltip = (d) => {\r\n    div.transition().duration(200).style(\"opacity\", 0.9);\r\n    const html = `<div><b>${d.name}</b></div>`;\r\n    div\r\n      .html(html)\r\n      .style(\"left\", `${d3.event.pageX}px`)\r\n      .style(\"top\", `${d3.event.pageY - 28}px`);\r\n  };\r\n\r\n  const removeTooltip = () => {\r\n    div.transition().duration(200).style(\"opacity\", 0);\r\n  };\r\n\r\n  // This creates the d3 force simulation\r\n  const simulation = d3\r\n    // Pass the nodes we want it to use\r\n    .forceSimulation(nodes)\r\n    // This sets up the force generated by the links between the nodes\r\n    .force(\r\n      \"link\",\r\n      d3.forceLink(links).id((d) => d.id)\r\n    )\r\n    // This sets up the force between the nodes themselves\r\n    .force(\"charge\", d3.forceManyBody().strength(-1150))\r\n    // These forces keep the nodes towards the centre of the screen\r\n    .force(\"x\", d3.forceX())\r\n    .force(\"y\", d3.forceY());\r\n\r\n  const svg = d3\r\n    .select(container)\r\n    .append(\"svg\")\r\n    .attr(\"viewBox\", [-width / 2, -height / 2, width, height])\r\n    .call(\r\n      d3.zoom().on(\"zoom\", function () {\r\n        svg.attr(\"transform\", d3.event.transform);\r\n      })\r\n    );\r\n\r\n  const link = svg\r\n    .append(\"g\")\r\n    .attr(\"stroke\", \"#999\")\r\n    .attr(\"stroke-opacity\", 0.6)\r\n    .selectAll(\"line\")\r\n    .data(links)\r\n    .join(\"line\")\r\n    .attr(\"stroke-width\", (d) => Math.sqrt(d.value));\r\n\r\n  const node = svg\r\n    .append(\"g\")\r\n    .attr(\"stroke\", \"#fff\")\r\n    .attr(\"stroke-width\", 2)\r\n    .selectAll(\"circle\")\r\n    .data(nodes)\r\n    .join(\"circle\")\r\n    .attr(\"r\", 32)\r\n    .attr(\"fill\", \"#808080\")\r\n    .call(drag(simulation));\r\n\r\n  const label = svg\r\n    .append(\"g\")\r\n    .attr(\"class\", \"labels\")\r\n    .selectAll(\"text\")\r\n    .data(nodes)\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"text-anchor\", \"middle\")\r\n    .attr(\"dominant-baseline\", \"central\")\r\n    .style(\"fill\", \"white\")\r\n    .text((d) => {\r\n      return d.name;\r\n    })\r\n\r\n    .call(drag(simulation));\r\n\r\n  label\r\n    .on(\"mouseover\", (d) => {\r\n      addTooltip(d, d3.event.pageX, d3.event.pageY);\r\n    })\r\n    .on(\"mouseout\", () => {\r\n      removeTooltip();\r\n    });\r\n\r\n  simulation.on(\"tick\", () => {\r\n    // Update link positions\r\n    link\r\n      .attr(\"x1\", (d) => d.source.x)\r\n      .attr(\"y1\", (d) => d.source.y)\r\n      .attr(\"x2\", (d) => d.target.x)\r\n      .attr(\"y2\", (d) => d.target.y);\r\n\r\n    // Update node positions\r\n    node.attr(\"cx\", (d) => d.x).attr(\"cy\", (d) => d.y);\r\n\r\n    // Update label positions\r\n    label\r\n      .attr(\"x\", (d) => {\r\n        return d.x;\r\n      })\r\n      .attr(\"y\", (d) => {\r\n        return d.y;\r\n      });\r\n  });\r\n\r\n  return {\r\n    destroy: () => {\r\n      simulation.stop();\r\n    },\r\n    nodes: () => {\r\n      return svg.node();\r\n    },\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { runForceGraph } from \"./forceGraphGenerator\";\r\nimport styles from \"./forceGraph.module.css\";\r\n\r\nexport function ForceGraph({ linksData, nodesData }) {\r\n  const containerRef = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    let destroyFn;\r\n\r\n    if (containerRef.current) {\r\n      const { destroy } = runForceGraph(containerRef.current, linksData, nodesData);\r\n      destroyFn = destroy;\r\n    }\r\n\r\n    return destroyFn;\r\n  }, []);\r\n\r\n  return <div ref={containerRef} className={styles.container} />;\r\n}\r\n","import React from 'react';\nimport data from './data/data.json';\nimport { ForceGraph } from \"./components/forceGraph\";\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        A simple force graph\n      </header>\n      <section className=\"Main\">\n        <ForceGraph linksData={data.links} nodesData={data.nodes}/>\n      </section>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"forceGraph_container__2Fpro\",\"node\":\"forceGraph_node__3azZm\",\"tooltip\":\"forceGraph_tooltip__24MRW\"};"],"sourceRoot":""}